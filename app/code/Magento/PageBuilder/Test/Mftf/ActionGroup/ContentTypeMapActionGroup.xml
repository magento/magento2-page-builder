<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/actionGroupSchema.xsd">
    <actionGroup name="clickAddLocationButton">
        <comment userInput="clickAddLocationButton" stepKey="comment"/>
        <waitForPageLoad stepKey="waitForPageLoad1"/>
        <waitForElementVisible selector="{{EditMapForm.addLocationButton}}" stepKey="waitForAddLocationButton"/>
        <click selector="{{EditMapForm.addLocationButton}}" stepKey="clickAddLocationButton"/>
        <waitForPageLoad stepKey="waitForPageLoad2"/>
        <waitForElementVisible selector="{{AddLocationForm.form}}" stepKey="waitForForm"/>
        <see userInput="Add Location" selector="{{AddLocationForm.formTitle}}" stepKey="seeFormTitle"/>
        <conditionalClick selector="{{AddLocationForm.googleModalOkButton('1')}}" dependentSelector="{{AddLocationForm.googleModalOkButton('1')}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="dontSeeGoogleModalInDOM"/>
    </actionGroup>
    <actionGroup name="saveLocationForm">
        <comment userInput="saveLocationForm" stepKey="comment"/>
        <waitForElementVisible selector="{{AddLocationForm.editFormSave}}" stepKey="waitForSaveButton"/>
        <click selector="{{AddLocationForm.editFormSave}}" stepKey="clickSaveButton"/>
        <waitForPageLoad stepKey="waitForPageLoad"/>
        <waitForElementNotVisible selector="{{AddLocationForm.form}}" stepKey="waitForAddLocationFormNotVisible"/>
        <waitForElementVisible selector="{{EditPanelForm.editFormSave}}" stepKey="waitForSaveEditMapFormButton"/>
    </actionGroup>
    <actionGroup name="closeLocationForm">
        <comment userInput="closeLocationForm" stepKey="comment"/>
        <waitForElementVisible selector="{{AddLocationForm.cancelButton}}" stepKey="waitForCancelButton"/>
        <click selector="{{AddLocationForm.cancelButton}}" stepKey="clickCancelButton"/>
        <waitForPageLoad stepKey="waitForPageLoad"/>
        <waitForElementNotVisible selector="{{AddLocationForm.form}}" stepKey="waitForAddLocationFormNotVisible"/>
        <waitForElementVisible selector="{{EditPanelForm.editFormSave}}" stepKey="waitForSaveEditMapFormButton"/>
    </actionGroup>
    <actionGroup name="clickLocationGridRow">
        <arguments>
            <argument name="locationName"/>
        </arguments>
        <comment userInput="clickLocationGridRow" stepKey="comment"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridBase}}" stepKey="waitForGrid"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridRow(locationName.fieldName, locationName.value)}}" stepKey="waitForGridRow"/>
        <click selector="{{PageBuilderDataGrid.gridRow(locationName.fieldName, locationName.value)}}" stepKey="clickGridRow"/>
        <waitForPageLoad stepKey="waitForPageLoad"/>
        <waitForElementVisible selector="{{AddLocationForm.form}}" stepKey="waitForForm"/>
        <see userInput="Add Location" selector="{{AddLocationForm.formTitle}}" stepKey="seeFormTitle"/>
        <conditionalClick selector="{{AddLocationForm.googleModalOkButton('1')}}" dependentSelector="{{AddLocationForm.googleModalOkButton('1')}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="dontSeeGoogleModalInDOM"/>
    </actionGroup>
    <actionGroup name="clickEditButtonOnLocationGrid">
        <arguments>
            <argument name="locationName"/>
        </arguments>
        <comment userInput="clickEditButtonOnLocationGrid" stepKey="comment"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridSelectButton(locationName.fieldName, locationName.value)}}" stepKey="waitForSelectButton"/>
        <click selector="{{PageBuilderDataGrid.gridSelectButton(locationName.fieldName, locationName.value)}}" stepKey="clickSelectButton"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridSelectEditButton(locationName.fieldName, locationName.value)}}" stepKey="waitForEditButton"/>
        <click selector="{{PageBuilderDataGrid.gridSelectEditButton(locationName.fieldName, locationName.value)}}" stepKey="clickEditButton"/>
        <waitForPageLoad stepKey="waitForPageLoad"/>
        <waitForElementVisible selector="{{AddLocationForm.form}}" stepKey="waitForForm"/>
        <see userInput="Add Location" selector="{{AddLocationForm.formTitle}}" stepKey="seeFormTitle"/>
        <conditionalClick selector="{{AddLocationForm.googleModalOkButton('1')}}" dependentSelector="{{AddLocationForm.googleModalOkButton('1')}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="dontSeeGoogleModalInDOM"/>
    </actionGroup>
    <actionGroup name="deleteLocationFromGrid">
        <arguments>
            <argument name="locationName"/>
        </arguments>
        <comment userInput="deleteLocationFromGrid" stepKey="comment"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridBase}}" stepKey="waitForGrid"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridRow(locationName.fieldName, locationName.value)}}" stepKey="waitForGridRow"/>
        <click selector="{{PageBuilderDataGrid.gridSelectButton(locationName.fieldName, locationName.value)}}" stepKey="clickSelectButton"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridSelectDeleteButton(locationName.fieldName, locationName.value)}}" stepKey="waitForDeleteButton"/>
        <click selector="{{PageBuilderDataGrid.gridSelectDeleteButton(locationName.fieldName, locationName.value)}}" stepKey="clickDelete"/>
        <waitForPageLoad stepKey="waitForPageLoad"/>
        <waitForElementNotVisible selector="{{PageBuilderDataGrid.gridRow(locationName.fieldName, locationName.value)}}" stepKey="waitForGridRowNotVisible"/>
    </actionGroup>
    <actionGroup name="validateLocationGridData">
        <arguments>
            <argument name="locationName"/>
            <argument name="address" defaultValue="PageBuilderMapStreetAddress_Default"/>
            <argument name="phoneNumber" defaultValue="PageBuilderMapPhoneNumber_Default"/>
            <argument name="city" defaultValue="PageBuilderMapCity_Default"/>
            <argument name="state" defaultValue="PageBuilderMapState_Default"/>
            <argument name="zip" defaultValue="PageBuilderMapZipCode_Default"/>
            <argument name="country" defaultValue="PageBuilderMapCountry_Empty"/>
            <argument name="rowIndex" defaultValue="1" type="string"/>
        </arguments>
        <comment userInput="validateLocationGridData" stepKey="comment"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridBase}}" stepKey="waitForGrid"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridCellByRowIndex(rowIndex, locationName.fieldName, locationName.value)}}" stepKey="waitForLocationName"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridCellByRowIndex(rowIndex, phoneNumber.fieldName, phoneNumber.value)}}" stepKey="waitForPhoneNumber"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridCellByRowIndex(rowIndex, address.fieldName, address.value)}}" stepKey="waitForAddress"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridCellByRowIndex(rowIndex, city.fieldName, city.value)}}" stepKey="waitForCity"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridCellByRowIndex(rowIndex, state.fieldName, state.value)}}" stepKey="waitForState"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridCellByRowIndex(rowIndex, zip.fieldName, zip.value)}}" stepKey="waitForZip"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridCellByRowIndex(rowIndex, country.fieldName, country.value)}}" stepKey="waitForCountry"/>
        <waitForElementVisible selector="{{PageBuilderDataGrid.gridSelectButtonByIndex(rowIndex)}}" stepKey="waitForSelectButton"/>
    </actionGroup>
    <actionGroup name="clickMapToAddOrMovePin">
        <arguments>
            <argument name="x" defaultValue="null" type="string"/>
            <argument name="y" defaultValue="null" type="string"/>
        </arguments>
        <conditionalClick selector="{{AddLocationForm.googleModalOkButton('1')}}" dependentSelector="{{AddLocationForm.googleModalOkButton('1')}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="dontSeeGoogleModalInDOM"/>
        <waitForElementVisible selector="{{AddLocationForm.base}}" stepKey="waitForMapVisible"/>
        <clickWithLeftButton selector="{{AddLocationForm.base}}" x="{{x}}" y="{{y}}" stepKey="clickMapToMovePin"/>
        <waitForElementVisible selector="{{AddLocationForm.pin}}" stepKey="waitForPinVisible"/>
        <wait time="2" stepKey="waitForPinMove"/>
    </actionGroup>
    <actionGroup name="moveMapPinByDraggingAndDroppingPin">
        <arguments>
            <argument name="x" defaultValue="null" type="string"/>
            <argument name="y" defaultValue="null" type="string"/>
        </arguments>
        <conditionalClick selector="{{AddLocationForm.googleModalOkButton('1')}}" dependentSelector="{{AddLocationForm.googleModalOkButton('1')}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="dontSeeGoogleModalInDOM"/>
        <waitForElementVisible selector="{{AddLocationForm.clickablePin}}" stepKey="waitForMapVisible"/>
        <!-- Adding 2nd click to reduce flakiness -->
        <conditionalClick selector="{{AddLocationForm.googleModalOkButton('1')}}" dependentSelector="{{AddLocationForm.googleModalOkButton('1')}}" visible="true" stepKey="clickOkButton2"/>
        <waitForElementNotVisible selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="waitForGoogleModalGone2"/>
        <dontSeeElementInDOM selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="dontSeeGoogleModalInDOM2"/>
        <dragAndDrop selector1="{{AddLocationForm.clickablePin}}" selector2="{{AddLocationForm.clickablePin}}" x="{{x}}" y="{{y}}" stepKey="dragAndDropOnMapToMovePin"/>
        <wait time="2" stepKey="waitForPinMove"/>
    </actionGroup>
    <actionGroup name="verifyMapHasPin">
        <arguments>
            <argument name="page" defaultValue="MapOnStage"/>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <conditionalClick selector="{{page.googleModalOkButton(index)}}" dependentSelector="{{page.googleModalOkButton(index)}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{page.googleModalOkButton(index)}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{page.googleModalOkButton(index)}}" stepKey="dontSeeGoogleModalInDOM"/>
        <waitForElementVisible selector="{{page.pin(index)}}" stepKey="waitForMapWithPin"/>
    </actionGroup>
    <actionGroup name="verifyNumberOfPinsOnMap">
        <arguments>
            <argument name="page" defaultValue="MapOnStage"/>
            <argument name="mapIndex" defaultValue="1" type="string"/>
            <argument name="count" type="string"/>
        </arguments>
        <conditionalClick selector="{{page.googleModalOkButton(mapIndex)}}" dependentSelector="{{page.googleModalOkButton(mapIndex)}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{page.googleModalOkButton(mapIndex)}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{page.googleModalOkButton(mapIndex)}}" stepKey="dontSeeGoogleModalInDOM"/>
        <waitForElementVisible selector="{{page.base(mapIndex)}}" stepKey="waitForMap"/>
        <waitForElementVisible selector="{{page.pin(mapIndex)}}" stepKey="waitForMapPin"/>
        <seeNumberOfElements selector="{{page.pin(mapIndex)}}" userInput="{{count}}" stepKey="seeNumberOfPins"/>
    </actionGroup>
    <actionGroup name="dontSeeMapPin">
        <arguments>
            <argument name="page" defaultValue="MapOnStage"/>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <conditionalClick selector="{{page.googleModalOkButton(index)}}" dependentSelector="{{page.googleModalOkButton(index)}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{page.googleModalOkButton(index)}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{page.googleModalOkButton(index)}}" stepKey="dontSeeGoogleModalInDOM"/>
        <dontSeeElement selector="{{page.pin(index)}}" stepKey="dontSeeMapPin"/>
    </actionGroup>
    <actionGroup name="validateMapButtons">
        <arguments>
            <argument name="page" defaultValue="MapOnStage"/>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <comment userInput="validateMapButtons" stepKey="comment"/>
        <conditionalClick selector="{{page.googleModalOkButton(index)}}" dependentSelector="{{page.googleModalOkButton(index)}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{page.googleModalOkButton(index)}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{page.googleModalOkButton(index)}}" stepKey="dontSeeGoogleModalInDOM"/>
        <waitForElementVisible selector="{{page.base(index)}}" stepKey="seeMap"/>
        <waitForElementVisible selector="{{page.fullScreen(index)}}" stepKey="waitForFullScreenButton"/>
        <waitForElementVisible selector="{{page.zoomIn(index)}}" stepKey="waitForMapZoomIn"/>
        <waitForElementVisible selector="{{page.zoomOut(index)}}" stepKey="waitForMapZoomOut"/>
    </actionGroup>
    <actionGroup name="validateNoMapButtons">
        <arguments>
            <argument name="page" defaultValue="MapOnStage"/>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <comment userInput="validateNoMapButtons" stepKey="comment"/>
        <conditionalClick selector="{{page.googleModalOkButton(index)}}" dependentSelector="{{page.googleModalOkButton(index)}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{page.googleModalOkButton(index)}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{page.googleModalOkButton(index)}}" stepKey="dontSeeGoogleModalInDOM"/>
        <waitForElementVisible selector="{{page.base(index)}}" stepKey="seeMap"/>
        <waitForElement selector="{{page.fullScreen(index)}}" stepKey="waitForFullScreenButton"/>
        <dontSeeElement selector="{{page.fullScreen(index)}}" stepKey="dontSeeFullScreenButton"/>
        <dontSeeElementInDOM selector="{{page.zoomIn(index)}}" stepKey="dontSeeMapZoomIn"/>
        <dontSeeElementInDOM selector="{{page.zoomOut(index)}}" stepKey="dontSeeMapZoomOut"/>
    </actionGroup>
    <actionGroup name="validateMapHelperText">
        <waitForElementVisible selector="{{AddLocationForm.helperText}}" stepKey="seeMapHelperText"/>
    </actionGroup>
    <actionGroup name="validateMapSettings">
        <arguments>
            <argument name="page"/>
            <argument name="height" defaultValue="PageBuilderMapHeightDefaultProperty"/>
            <argument name="showControls" defaultValue="PageBuilderMapShowControls_Default"/>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <comment userInput="validateMapSettings" stepKey="comment"/>
        <waitForElementVisible selector="{{page.base(index)}}" stepKey="seeMap"/>
        <waitForElementVisible selector="{{page.height(index, height.value)}}" stepKey="waitForHeight"/>
        <waitForElementVisible selector="{{page.showControls(index, showControls.value)}}" stepKey="waitForShowControls"/>
    </actionGroup>
    <actionGroup name="validateEmptyMapStoreFront">
        <arguments>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <comment userInput="validateEmptyMapStoreFront" stepKey="comment"/>
        <waitForElement selector="{{MapOnStorefront.emptyMap(index)}}" stepKey="seeInDOMEmptyMapOnFrontend"/>
        <dontSeeElement selector="{{MapOnStorefront.emptyMap(index)}}" stepKey="dontSeeEmptyMapOnFrontend"/>
        <executeJS function="return Math.round({{index}}-1)" stepKey="jSIndex"/>
        <executeJS function="return {{MapOnStorefront.baseJS('{$jSIndex}')}}.clientHeight" stepKey="mapHeight"/>
        <assertEquals stepKey="assertMapHeightIsZero">
            <expectedResult type="int">0</expectedResult>
            <actualResult type="variable">$mapHeight</actualResult>
        </assertEquals>
    </actionGroup>
    <actionGroup name="openMapPinTooltipWindow">
        <arguments>
            <argument name="page" defaultValue="MapOnStage"/>
            <argument name="mapIndex" defaultValue="1" type="string"/>
            <argument name="pinIndex" defaultValue="1" type="string"/>
        </arguments>
        <comment userInput="openMapPinTooltipWindow" stepKey="comment"/>
        <conditionalClick selector="{{page.googleModalOkButton(mapIndex)}}" dependentSelector="{{page.googleModalOkButton(mapIndex)}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{page.googleModalOkButton(mapIndex)}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{page.googleModalOkButton(mapIndex)}}" stepKey="dontSeeGoogleModalInDOM"/>
        <waitForElementVisible selector="{{page.clickablePin(mapIndex, pinIndex)}}" stepKey="waitForPin"/>
        <!-- Adding 2nd click to reduce flakiness -->
        <conditionalClick selector="{{page.googleModalOkButton(mapIndex)}}" dependentSelector="{{page.googleModalOkButton(mapIndex)}}" visible="true" stepKey="clickOkButton2"/>
        <waitForElementNotVisible selector="{{page.googleModalOkButton(mapIndex)}}" stepKey="waitForGoogleModalGone2"/>
        <dontSeeElementInDOM selector="{{page.googleModalOkButton(mapIndex)}}" stepKey="dontSeeGoogleModalInDOM2"/>
        <click selector="{{page.clickablePin(mapIndex, pinIndex)}}" stepKey="clickPin"/>
        <waitForElementVisible selector="{{page.tooltipWindow(mapIndex)}}" stepKey="waitForPinTooltip"/>
    </actionGroup>
    <actionGroup name="closeMapPinTooltipWindow">
        <arguments>
            <argument name="page" defaultValue="MapOnStage"/>
            <argument name="mapIndex" defaultValue="1" type="string"/>
        </arguments>
        <comment userInput="closeMapPinTooltipWindow" stepKey="comment"/>
        <moveMouseOver selector="{{page.base(mapIndex)}}" x="-1" y="0" stepKey="moveMouseOutsideMap"/>
        <waitForPageLoad stepKey="waitForOptionMenuGone"/>
        <click selector="{{page.tooltipWindowClose(mapIndex)}}" stepKey="closePinTooltip"/>
        <waitForElementNotVisible selector="{{page.tooltipWindow(mapIndex)}}" stepKey="waitForPinTooltipGone"/>
    </actionGroup>
    <actionGroup name="validateMapPinLocationData">
        <arguments>
            <argument name="page"/>
            <argument name="locationName" defaultValue="PageBuilderMapLocationName_Default"/>
            <argument name="comment" defaultValue="PageBuilderMapComment_Default"/>
            <argument name="phoneNumber" defaultValue="PageBuilderMapPhoneNumber_Default"/>
            <argument name="address" defaultValue="PageBuilderMapStreetAddress_Default"/>
            <argument name="city" defaultValue="PageBuilderMapCity_Default"/>
            <argument name="state" defaultValue="PageBuilderMapState_Default"/>
            <argument name="zip" defaultValue="PageBuilderMapZipCode_Default"/>
            <argument name="country" defaultValue="PageBuilderMapCountry_Default"/>
            <argument name="mapIndex" defaultValue="1" type="string"/>
            <argument name="pinIndex" defaultValue="1" type="string"/>
        </arguments>
        <comment userInput="validateMapPinLocationData" stepKey="comment1"/>
        <conditionalClick selector="{{page.googleModalOkButton(mapIndex)}}" dependentSelector="{{page.googleModalOkButton(mapIndex)}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{page.googleModalOkButton(mapIndex)}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{page.googleModalOkButton(mapIndex)}}" stepKey="dontSeeGoogleModalInDOM"/>
        <waitForElementVisible selector="{{page.clickablePin(mapIndex, pinIndex)}}" stepKey="waitForPin"/>
        <!-- Adding 2nd click to reduce flakiness -->
        <conditionalClick selector="{{page.googleModalOkButton(mapIndex)}}" dependentSelector="{{page.googleModalOkButton(mapIndex)}}" visible="true" stepKey="clickOkButton2"/>
        <waitForElementNotVisible selector="{{page.googleModalOkButton(mapIndex)}}" stepKey="waitForGoogleModalGone2"/>
        <dontSeeElementInDOM selector="{{page.googleModalOkButton(mapIndex)}}" stepKey="dontSeeGoogleModalInDOM2"/>
        <click selector="{{page.clickablePin(mapIndex, pinIndex)}}" stepKey="clickPin"/>
        <waitForElementVisible selector="{{page.tooltipWindow(mapIndex)}}" stepKey="waitForPinTooltip"/>
        <waitForElementVisible selector="{{page.locationName(mapIndex, locationName.value)}}" stepKey="waitForLocationName"/>
        <waitForElementVisible selector="{{page.comment(mapIndex, comment.value)}}" stepKey="waitForComment"/>
        <waitForElementVisible selector="{{page.phoneNumber(mapIndex, phoneNumber.value)}}" stepKey="waitForPhoneNumber"/>
        <waitForElementVisible selector="{{page.addressCityStateZipCountry(mapIndex, address.value, city.value, state.tooltipValue, zip.value, country.tooltipValue)}}" stepKey="waitForAddress"/>
        <moveMouseOver selector="{{page.base(mapIndex)}}" x="-1" y="0" stepKey="moveMouseOutsideMap"/>
        <waitForPageLoad stepKey="waitForOptionMenuGone"/>
        <click selector="{{page.tooltipWindowClose(mapIndex)}}" stepKey="closePinTooltip"/>
        <waitForElementNotVisible selector="{{page.tooltipWindow(mapIndex)}}" stepKey="waitForPinTooltipGone"/>
    </actionGroup>
    <actionGroup name="validateNoPinTooltip">
        <comment userInput="validateNoPinTooltip" stepKey="comment"/>
        <conditionalClick selector="{{AddLocationForm.googleModalOkButton('1')}}" dependentSelector="{{AddLocationForm.googleModalOkButton('1')}}" visible="true" stepKey="clickOkButton"/>
        <waitForElementNotVisible selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="waitForGoogleModalGone"/>
        <dontSeeElementInDOM selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="dontSeeGoogleModalInDOM"/>
        <waitForElementVisible selector="{{AddLocationForm.clickablePin}}" stepKey="waitForPin"/>
        <!-- Adding 2nd click to reduce flakiness -->
        <conditionalClick selector="{{AddLocationForm.googleModalOkButton('1')}}" dependentSelector="{{AddLocationForm.googleModalOkButton('1')}}" visible="true" stepKey="clickOkButton2"/>
        <waitForElementNotVisible selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="waitForGoogleModalGone2"/>
        <dontSeeElementInDOM selector="{{AddLocationForm.googleModalOkButton('1')}}" stepKey="dontSeeGoogleModalInDOM2"/>
        <click selector="{{AddLocationForm.clickablePin}}" stepKey="clickPin"/>
        <dontSeeElementInDOM selector="{{AddLocationForm.tooltipWindow}}" stepKey="dontSeeTooltip"/>
    </actionGroup>
    <actionGroup name="verifyPinLocationEqual">
        <arguments>
            <argument name="page"/>
            <argument name="comparedPinLocation" type="string"/>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <waitForElement selector="{{page.pinLocations(index)}}" stepKey="waitForPinLocation"/>
        <grabAttributeFrom selector="{{page.pinLocations(index)}}" userInput="style" stepKey="pinLocations"/>
        <assertEquals stepKey="assertPinPositionEqual">
            <expectedResult type="variable">{{comparedPinLocation}}</expectedResult>
            <actualResult type="variable">pinLocations</actualResult>
        </assertEquals>
    </actionGroup>
    <actionGroup name="verifyPinLocationNotEqual">
        <arguments>
            <argument name="page"/>
            <argument name="comparedPinLocation" type="string"/>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <wait time="2" stepKey="waitForPageLoad"/>
        <waitForElement selector="{{page.pinLocations(index)}}" stepKey="waitForPinLocation"/>
        <grabAttributeFrom selector="{{page.pinLocations(index)}}" userInput="style" stepKey="pinLocations"/>
        <assertNotEquals stepKey="assertPinPositionNotEqual">
            <expectedResult type="variable">{{comparedPinLocation}}</expectedResult>
            <actualResult type="variable">pinLocations</actualResult>
        </assertNotEquals>
    </actionGroup>
    <actionGroup name="verifyCoordinatesNotEqual">
        <arguments>
            <argument name="property"/>
            <argument name="comparedCoordinate" type="string"/>
        </arguments>
        <waitForElementVisible selector="{{EditPanelForm.panelFieldControl(property.section, property.fieldName)}}" stepKey="waitForCoordinate"/>
        <grabValueFrom selector="{{EditPanelForm.panelFieldControl(property.section, property.fieldName)}}" stepKey="actualCoordinate"/>
        <assertNotEquals stepKey="assertCoordinateNotEqual">
            <expectedResult type="variable">{{comparedCoordinate}}</expectedResult>
            <actualResult type="variable">actualCoordinate</actualResult>
        </assertNotEquals>
    </actionGroup>
    <actionGroup name="verifyMapLatitudeAndLongitude">
        <arguments>
            <argument name="page"/>
            <argument name="latitude"/>
            <argument name="longitude"/>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <comment userInput="verifyMapLatitudeAndLongitude" stepKey="comment"/>
        <waitForElementVisible selector="{{page.base(index)}}" stepKey="waitForMap"/>
        <waitForElementVisible selector="{{page.latitude(index, latitude.value)}}" stepKey="waitForLatitude"/>
        <waitForElementVisible selector="{{page.longitude(index, longitude.value)}}" stepKey="waitForLongitude"/>
    </actionGroup>
    <actionGroup name="verifyMapLatitudeAndLongitudeAlternate">
        <!-- Need an alternate action group: MQE-965 -->
        <arguments>
            <argument name="page"/>
            <argument name="latitude" type="string"/>
            <argument name="longitude" type="string"/>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <comment userInput="verifyMapLatitudeAndLongitudeAlternate" stepKey="comment"/>
        <waitForElementVisible selector="{{page.base(index)}}" stepKey="waitForMap"/>
        <waitForElementVisible selector="{{page.latitude(index, latitude)}}" stepKey="waitForLatitude"/>
        <waitForElementVisible selector="{{page.longitude(index, longitude)}}" stepKey="waitForLongitude"/>
    </actionGroup>
    <actionGroup name="dontSeeWarningMessage">
        <arguments>
            <argument name="page" defaultValue="MapOnStage"/>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <waitForElement selector="{{page.base(index)}}" stepKey="seeMap"/>
        <dontSee userInput="{{googleMapsAPIKey.warningMessage}}" stepKey="dontSeeWarningMessage"/>
    </actionGroup>
    <actionGroup name="validateMapErrorMessageStage">
        <arguments>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <waitForElement selector="{{MapOnStage.base(index)}}" stepKey="seeMap"/>
        <waitForElementVisible selector="{{MapOnStage.errorContainer(index)}}" stepKey="seeMapErrorContainer"/>
        <see userInput="{{PageBuilderMapCommonData.mapErrorMessageStage}}" selector="{{MapOnStage.errorContainer(index)}}" stepKey="seeMapErrorMessage"/>
    </actionGroup>
    <actionGroup name="validateMapErrorMessageStorefront">
        <arguments>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <waitForElement selector="{{MapOnStorefront.base(index)}}" stepKey="seeMap"/>
        <waitForElementVisible selector="{{MapOnStorefront.errorContainer(index)}}" stepKey="seeMapErrorContainer"/>
        <see userInput="{{PageBuilderMapCommonData.mapErrorTitleStorefront}}" selector="{{MapOnStorefront.errorTitle(index)}}" stepKey="seeMapErrorTitle"/>
        <see userInput="{{PageBuilderMapCommonData.mapErrorMessageStorefront}}" selector="{{MapOnStorefront.errorMessage(index)}}" stepKey="seeMapErrorMessage"/>
    </actionGroup>
    <actionGroup name="dontSeeRenderedMapOnLocationForm">
        <arguments>
            <argument name="index" defaultValue="1" type="string"/>
        </arguments>
        <waitForElementVisible selector="{{AddLocationForm.base(index)}}" stepKey="seeMap"/>
        <dontSeeElementInDOM selector="{{AddLocationForm.renderedMap}}" stepKey="dontSeeRenderedMap"/>
    </actionGroup>
</actionGroups>
