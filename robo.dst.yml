task:
  global:
    settings:
      test_directory: var/acceptance
      build_directory: %build_directory%
      database_prefix: %mysql_database_prefix%
      cache_directory: var/cache
      db_host: %mysql_hostname%
      db_user: %mysql_username%
      db_password: %mysql_password%
  Dev:
    CreateBuild:
      settings:
        default_skeleton: ce_mainline
        default_version: develop
        skeletons:
          ce_mainline:
            strategy: monorepo
            repository: git@github.com:magento-obsessive-owls/magento2ce.git
          ee_mainline:
            strategy: link
            repository: git@github.com:magento-obsessive-owls/magento2ce.git
            link_script: ee
            links:
              ee: git@github.com:magento-obsessive-owls/magento2ee.git
          b2b_mainline:
            strategy: link
            repository: git@github.com:magento-obsessive-owls/magento2ce.git
            link_script: ee
            links:
              ee: git@github.com:magento-obsessive-owls/magento2ee.git
              b2b: git@github.com:magento-obsessive-owls/magento2b2b.git
          ce_release:
            strategy: metapackage
            repository: https://repo.magento.com/
            package: magento/project-community-edition
        dependencies:
          magento/module-jest-integration:
            type: vcs
            url: git@gitlab.corp.magento.com:magento-obsessive-owls/magento2-module-jest-integration.git
            version: dev-master@dev
        links:
          - app/code/Gene/BlueFoot
        install_options:
          admin-user: %admin_username%
          admin-password: %admin_password%
          admin-email: admin@magento.local
          admin-firstname: Admin
          admin-lastname: Admin
          base-url: http://magento.local/
          db-host: %mysql_hostname%
          db-user: %mysql_username%
          db-password: %mysql_password%
          backend-frontname: admin
          admin-use-security-key: '0'
          use-rewrites: '1'
          magento-init-params: MAGE_MODE=developer
          language: en_US
          timezone: UTC
          currency: USD
    RunAcceptanceTest:
      settings:
        before_test: npx gulp build
        groups:
          - bluefoot
    GenerateAcceptanceTest:
      settings:
        admin_user: %admin_username%
        admin_password: %admin_password%
        skeletons:
          default:
            - dev/tests/acceptance/tests/functional/Magento/FunctionalTest/*
            - <buildDir>/dev/tests/acceptance/tests/functional/Magento/FunctionalTest/Backend
            - <buildDir>/dev/tests/acceptance/tests/functional/Magento/FunctionalTest/Cms
    SeleniumServer:
      settings:
        server_url: https://selenium-release.storage.googleapis.com/3.6/selenium-server-standalone-3.6.0.jar
        chrome_driver_url: https://chromedriver.storage.googleapis.com/2.33/chromedriver_mac64.zip
