<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="../../../../../../vendor/magento/magento2-functional-testing-framework/src/Magento/FunctionalTestingFramework/Test/etc/testSchema.xsd">
    <test name="CanAddTextToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Text to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89954"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Text to Tab -->
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragTextOntoTab">
            <argument name="contentBlockType" value="PageBuilderTextContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <actionGroup ref="openPageBuilderEditPanel" stepKey="openEditMenuOnStage">
            <argument name="contentBlockType" value="PageBuilderTextContentBlock"/>
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForEditPanelSpinner"/>
        <executeJS function="tinymce.activeEditor.setContent(tinymce.activeEditor.getContent() + 'This is some text')" stepKey="addTextToWYSIWYG"/>
        <click selector="{{TextOnBackend.triggerValidation}}" stepKey="clickToTriggerValidation"/>
        <waitForLoadingMaskToDisappear stepKey="waitForSpinner"/>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <!-- Verify Tab Height Adjusts to Content - Depends on MQE-818 -->
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Text in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <see userInput="This is some text" stepKey="assertTextOnStorefront"/>
    </test>
    <test name="CanAddBlockToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Block to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89955"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
            <group value="pagebuilder-customBeforeAfter"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="disablePageBuilderSetting" stepKey="disablePageBuilderSetting"/>
            <actionGroup ref="addCmsBlock" stepKey="addCmsBlock"/>
            <actionGroup ref="enablePageBuilderSetting" stepKey="turnOnPageBuilder" after="addCmsBlock"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Block to Tab -->
        <actionGroup ref="expandPageBuilderPanelGroup" stepKey="expandGroupInteractive">
            <argument name="group" value="PageBuilderBlockContentBlock"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragTextOntoTab">
            <argument name="contentBlockType" value="PageBuilderBlockContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <actionGroup ref="openPageBuilderEditPanel" stepKey="openEditMenuOnStage">
            <argument name="contentBlockType" value="PageBuilderBlockContentBlock"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterIdentifierProperty">
            <argument name="property" value="PageBuilderBlockIdentifierProperty"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Block in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <seeElement selector="{{TabOnStorefront.tabContentBlock('1')}}" stepKey="seeBlockContentFrontend"/>
    </test>
    <test name="CanAddNewsletterToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Newsletter to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89966"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Newsletter to Tab -->
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragNewsletterOntoTab">
            <argument name="contentBlockType" value="PageBuilderNewsletterContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Newsletter in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <seeElement selector="{{NewsletterOnStorefront.form('1')}}" stepKey="seeNewsletterForm"/>
    </test>
    <test name="CanAddButtonToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Buttons to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89956"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Button to Tab -->
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragButtonOntoTab">
            <argument name="contentBlockType" value="PageBuilderButtonsContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Button in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <seeElement selector="//div[@data-role='button-item']/a[contains(@class, 'pagebuilder-button-primary')]" stepKey="seeButtonTextOnStorefront"/>
    </test>
    <test name="CanAddImageToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Image to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89957"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
            <group value="pagebuilder-image"/>
            <group value="skip"/>
            <!--bug in develop MAGETWO-91060 -->
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Image to Tab -->
        <actionGroup ref="expandPageBuilderPanelGroup" stepKey="expandPageBuilderPanelGroup">
            <argument name="group" value="PageBuilderImageContentBlock"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragImageOntoTab">
            <argument name="contentBlockType" value="PageBuilderImageContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMaskToDisappear"/>
        <seeElement selector="{{ImageOnStage.uploadImageBtn}}" stepKey="seeUploadImageBtn" />
        <seeElement selector="{{ImageOnStage.selectFromGalleryBtn}}" stepKey="seeSelectFromGalleryBtn" />
        <!-- Attach image A to PageBuilder stage-->
        <attachFile userInput="{{PageBuilderImageOnStage.value}}" selector="{{ImageOnStage.attachImageBtn}}" stepKey="attachImageFileOnStage"/>
        <waitForElementVisible selector="{{ImageOnStage.imagePreview}}" stepKey="waitForImagePreview"/>
        <waitForElementVisible selector="{{ImageOnStage.imageSourceOnStage('magentoStage')}}" stepKey="waitForImageSource"/>
        <seeElement selector="{{ImageOnStage.imageSourceOnStage('magentoStage')}}" stepKey="seeImageSourceOnStage" />
        <seeElement selector="{{ImageOnStage.imageContentBlockByIndex(PageBuilderImageOnStage.fileName)}}" stepKey="seeImageOnStage"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Image in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <seeElement selector="{{ImageOnStorefront.imageSource(PageBuilderImageOnStage.fileName)}}" stepKey="seeImage2Source"/>
    </test>
    <test name="CanAddVideoToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Video to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89958"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Video to Tab -->
        <actionGroup ref="expandPageBuilderPanelGroup" stepKey="expandPageBuilderPanelGroup">
            <argument name="group" value="PageBuilderVideoContentBlock"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragVideoOntoTab">
            <argument name="contentBlockType" value="PageBuilderVideoContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMaskToDisappear"/>
        <actionGroup ref="openPageBuilderEditPanel" stepKey="openEditMenuOnStage">
            <argument name="contentBlockType" value="PageBuilderVideoContentBlock"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterVideoUrlProperty">
            <argument name="property" value="PageBuilderVideoUrl_YouTube"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterVideoWidthProperty">
            <argument name="property" value="PageBuilderVideoWidth_500"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterVideoHeightProperty">
            <argument name="property" value="PageBuilderVideoHeight_200"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Video in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <actionGroup ref="validateVideo" stepKey="validateStorefront">
            <argument name="page" value="VideoOnStorefront"/>
            <argument name="url" value="PageBuilderVideoUrl_YouTube"/>
            <argument name="width" value="PageBuilderVideoWidth_500"/>
            <argument name="height" value="PageBuilderVideoHeight_200"/>
        </actionGroup>
    </test>
    <test name="CanAddBannerToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Banner to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89959"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Banner to Tab -->
        <actionGroup ref="expandPageBuilderPanelGroup" stepKey="expandPageBuilderPanelGroup">
            <argument name="group" value="PageBuilderBannerContentBlock"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragBannerOntoTab">
            <argument name="contentBlockType" value="PageBuilderBannerContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMaskToDisappear"/>
        <actionGroup ref="openPageBuilderEditPanel" stepKey="openEditMenuOnStage">
            <argument name="contentBlockType" value="PageBuilderBannerContentBlock"/>
        </actionGroup>
        <actionGroup ref="addTextToTinyMCE" stepKey="addTextToTinyMCE">
            <argument name="property" value="PageBuilderBannerMessageProperty"/>
            <argument name="section" value="BannerOnConfigurationPanel"/>
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForSpinner"/>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Banner in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <seeElement selector="{{BannerOnFrontend.messageText(PageBuilderBannerMessageProperty.value)}}" stepKey="verifyMessage"/>
    </test>
    <test name="CanAddSliderToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Slider to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89960"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Slider to Tab -->
        <fillField selector="{{PageBuilderActionsSection.searchPanel}}" userInput="slider" stepKey="fillSearch"/>
        <see userInput="Slider" selector="{{PageBuilderActionsSection.searchResults}}" stepKey="validateSearchResults"/>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragSliderOntoTab">
            <argument name="contentBlockType" value="PageBuilderSliderContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMaskToDisappear"/>
        <!--Edit First Slide -->
        <comment userInput="First Slide opens when add Slider to stage" stepKey="EditFirstSlide"/>
        <waitForLoadingMaskToDisappear stepKey="waitForAnimationOnFirstSlide" />
        <waitForElementVisible selector="{{PageBuilderActionsSection.editFormTitle}}" stepKey="waitForEditSlide" />
        <see userInput="Edit Slide" selector="{{PageBuilderActionsSection.editFormTitle}}" stepKey="seeEditSlide"/>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterSlideTitle1">
            <argument name="property" value="PageBuilderSlideItemName1"/>
        </actionGroup>
        <actionGroup ref="attachFileSlideOutPropertyGeneral" stepKey="attachSlideImageFile1">
            <argument name="property" value="PageBuilderSlideBackgroundImageProperty1"/>
        </actionGroup>
        <executeJS function="tinymce.activeEditor.setContent(tinymce.activeEditor.getContent() + 'Slide 1 Content')" stepKey="addText1ToWYSIWYG"/>
        <click selector="{{TextOnBackend.triggerValidation}}" stepKey="clickToTriggerValidation1"/>
        <actionGroup ref="fillSlideOutPanelLinkUrlField" stepKey="enterSlideLinkURL1">
            <argument name="property" value="PageBuilderSlideItemLinkURL1"/>
            <argument name="selection" value="ExternalLink"/>
        </actionGroup>
        <actionGroup ref="selectSlideOutPanelField" stepKey="PageBuilderSlideShowButtonAlwaysProperty">
            <argument name="property" value="PageBuilderSlideShowButtonAlwaysProperty"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterSlideButtonText1">
            <argument name="property" value="PageBuilderSlideItemButtonText1"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Slider in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <seeElement selector="{{SliderOnFrontend.SliderDisplay}}" stepKey="seeSliderOnPageBuilderPage"/>
        <seeElement selector="{{SlideOnFrontend.slide('1')}}" stepKey="seeSlide1InSlider"/>
        <see userInput="{{PageBuilderSlideItemContent1.value}}" selector="{{SlideOnFrontend.slideContent('0')}}" stepKey="seeSlide1ContentDisplayed"/>
        <see userInput="{{PageBuilderSlideItemButtonText1.value}}" selector="{{SlideOnFrontend.slideButtonText('0')}}" stepKey="seeSlide1ButtonTextDisplayed"/>
        <seeElement selector="{{SlideOnFrontend.slideLinkURL1(PageBuilderSlideItemLinkURL1.value)}}" stepKey="seeSlide1LinkURL"/>
        <seeElement selector="{{SlideOnFrontend.slideBackgroundImage('0',PageBuilderSlideBackgroundImageProperty1.path, PageBuilderSlideBackgroundImageProperty1.fileType)}}" stepKey="seeSlide1Background"/>
        <seeElement selector="{{SlideOnFrontend.slideAppearancePoster('0')}}" stepKey="verifySlide1HasPosterAppearanceOnStorefront"/>
    </test>
    <test name="CanAddMapToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Map to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89961"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Map to Tab -->
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragMapOntoTab">
            <argument name="contentBlockType" value="PageBuilderMapContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMaskToDisappear"/>
        <actionGroup ref="closeEditPanelSettings" stepKey="closeEditPanel"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Map in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <actionGroup ref="validateEmptyMapStoreFront" stepKey="validateEmptyMapStoreFront"/>
    </test>
    <test name="CanAddColumnToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Column to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89962"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Column to Tab -->
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragColumnOntoTab">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMaskToDisappear"/>
        <actionGroup ref="openPageBuilderEditPanelByIndex" stepKey="openEditPanelForFirstColumn">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty1">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterBackgroundColorProperty">
            <argument name="property" value="PageBuilderBackgroundColorProperty"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <actionGroup ref="openPageBuilderEditPanelByIndex" stepKey="openEditPanelForSecondColumn">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="contentBlockIndex" value="2"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty2">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings2"/>
        <actionGroup ref="saveCmsPage" stepKey="saveCmsPage"/>
        <!-- Verify Column in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <seeElement selector="{{ColumnsOnFrontend.column1Height}}" stepKey="seeColumn1MinHeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1BackgroundColor}}" stepKey="seeColumn1BackgroundColorApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2BackgroundWidth}}" stepKey="seeColumn2DefaultWidthApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2Height}}" stepKey="seeColumn2HeightApplied"/>
    </test>
    <test name="CanAddAccordionToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Accordion to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89963"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Accordion to Tab -->
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragAccordionOntoTab">
            <argument name="contentBlockType" value="PageBuilderAccordionContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMaskToDisappear"/>
        <actionGroup ref="saveCmsPage" stepKey="saveCmsPage"/>
        <!-- Verify Accordion in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
    </test>
    <test name="CanAddHeadingToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Heading to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89967"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Heading to Tab -->
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragHeadingOntoTab">
            <argument name="contentBlockType" value="PageBuilderHeadingContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMaskToDisappear"/>
        <actionGroup ref="openPageBuilderEditPanel" stepKey="openEditMenuOnStage">
            <argument name="contentBlockType" value="PageBuilderHeadingContentBlock"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterHeadingTextProperty">
            <argument name="property" value="PageBuilderHeadingTextProperty"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings2"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Heading in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <actionGroup ref="verifyHeadingInStorefront" stepKey="verifyHeadingInStorefront"/>
    </test>
    <test name="CanAddAnchorToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Anchor to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89968"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Anchor to Tab -->
        <actionGroup ref="expandPageBuilderPanelGroup" stepKey="expandPageBuilderPanelGroup">
            <argument name="group" value="PageBuilderAnchorContentBlock"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragAnchorOntoTab">
            <argument name="contentBlockType" value="PageBuilderAnchorContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMaskToDisappear"/>
        <actionGroup ref="openPageBuilderEditPanel" stepKey="openEditMenuOnStage">
            <argument name="contentBlockType" value="PageBuilderAnchorContentBlock"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterAnchorIdentifier">
            <argument name="property" value="PageBuilderAnchorIdentifier"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Anchor in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <waitForElement selector="{{AnchorOnStorefront.identifier('1', PageBuilderAnchorIdentifier.value)}}" stepKey="waitForAnchorStorefront"/>
        <dontSeeElement selector="{{AnchorOnStorefront.identifier('1', PageBuilderAnchorIdentifier.value)}}" stepKey="dontSeeAnchorStorefront"/>
    </test>
    <test name="CanAddDividerToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add Divider to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89969"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add Divider to Tab -->
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragDividerOntoTab">
            <argument name="contentBlockType" value="PageBuilderDividerContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMaskToDisappear"/>
        <actionGroup ref="openPageBuilderEditPanel" stepKey="openEditMenuOnStage">
            <argument name="contentBlockType" value="PageBuilderDividerContentBlock"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterDividerLineColor">
            <argument name="property" value="PageBuilderDividerLineColor_FF5733"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterDividerLineThickness">
            <argument name="property" value="PageBuilderDividerLineThickness_10"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterDividerLineWidth">
            <argument name="property" value="PageBuilderDividerLineWidth_50"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Divider in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <actionGroup ref="validateDivider" stepKey="validateStorefront">
            <argument name="page" value="DividerOnStorefront"/>
            <argument name="color" value="PageBuilderDividerLineColor_FF5733"/>
            <argument name="thickness" value="PageBuilderDividerLineThickness_10"/>
            <argument name="width" value="PageBuilderDividerLineWidth_50"/>
        </actionGroup>
    </test>
    <test name="CanAddHtmlToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Add HTML to Tabs container and view on Admin and Storefront"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-90013"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Add HTML to Tab -->
        <actionGroup ref="expandPageBuilderPanelGroup" stepKey="expandPageBuilderPanelGroup">
            <argument name="group" value="PageBuilderHtmlContentBlock"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragHtmlOntoTab">
            <argument name="contentBlockType" value="PageBuilderHtmlContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMaskToDisappear"/>
        <actionGroup ref="openPageBuilderEditPanel" stepKey="openEditMenuOnStage">
            <argument name="contentBlockType" value="PageBuilderHtmlContentBlock"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldGeneral" stepKey="enterHtmlContent">
            <argument name="property" value="PageBuilderHtmlPropertyButton"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <!-- Verify Divider in Tab on storefront -->
        <comment userInput="View Tab on storefront" stepKey="viewTabOnStorefront"/>
        <amOnPage url="tabs{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <waitForElementVisible selector="{{HtmlOnStorefront.base('1')}}" stepKey="waitForHtmlBaseStorefront"/>
        <waitForElementVisible selector="{{HtmlOnStorefront.html('1', PageBuilderHtmlPropertyButton.selector)}}" stepKey="waitForHtmlStorefront"/>
    </test>
    <test name="CannotAddTabsToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Tabs does not allow drag and drop of Tabs within"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89964"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Try to drag Tabs onto Tab -->
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragTabsOntoTab">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <dontSeeElement selector="{{TabOnStage.default('2')}}" stepKey="dontSeeNewTabsOnStage"/>
    </test>
    <test name="CannotAddRowToTab">
        <annotations>
            <features value="PageBuilder"/>
            <stories value="Tabs: Add Content Inside Tab"/>
            <useCaseId value="MAGETWO-88269"/>
            <title value="Tabs does not allow drag and drop of Row within"/>
            <description value="As a Content Manager I want tab to be a container so that I can add any content inside the Tab, not only text"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-89965"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-tabs-content"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Add Tabs to Stage -->
        <click selector="{{PageBuilderActionsSection.interactiveGroup}}" stepKey="clickInteractiveGroup"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragTabsIntoStage">
            <argument name="contentBlockType" value="PageBuilderTabsContentBlock"/>
        </actionGroup>
        <!-- Validate Tabs default state On Stage -->
        <comment userInput="User sees tabs displayed with 1st default tab item created by default" stepKey="confirmTabsOnStage"/>
        <waitForPageLoad stepKey="waitForTabsToLoad" time="30"/>
        <waitForElementVisible selector="{{TabOnStage.tabContent('1')}}" stepKey="waitForFirstTabContent"/>
        <waitForElementVisible selector="{{TabOnStage.tabHeader('1')}}" stepKey="waitForFirstTabHeader"/>
        <!-- Try to drag Row onto Tab -->
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragRowOntoTab">
            <argument name="contentBlockType" value="PageBuilderRowContentBlock"/>
            <argument name="containerTargetType" value="PageBuilderTabContentBlock"/>
            <argument name="containerTargetIndex" value="1" />
        </actionGroup>
        <dontSeeElement selector="(//div[contains(@class,'pagebuilder-content-type') and contains(@class,'pagebuilder-tabs')])[1]//div[contains(@class, 'pagebuilder-row')]" stepKey="dontSeeNewRowOnStage"/>
    </test>
</tests>
